(()=>{"use strict";var e={208:(e,t,n)=>{n.d(t,{A:()=>o});var r=n(601),a=n.n(r),i=n(314),s=n.n(i)()(a());s.push([e.id,':root {\n  --cell-height: 1.5rem;\n  --cell-width: 1.5rem;\n  --MISS-color: rgb(248, 246, 126);\n  --SHIP-color: rgb(69, 65, 65);\n  --HIT-color: rgb(244, 68, 68);\n}\n/* Josh Comeau CSS reset */\n*,\n*::before,\n*::after {\n  box-sizing: border-box;\n}\n\n* {\n  margin: 0;\n}\n\n@media (prefers-reduced-motion: no-preference) {\n  html {\n    interpolate-size: allow-keywords;\n  }\n}\n\nbody {\n  line-height: 1.5;\n  -webkit-font-smoothing: antialiased;\n}\n\nimg,\npicture,\nvideo,\ncanvas,\nsvg {\n  display: block;\n  max-width: 100%;\n}\n\ninput,\nbutton,\ntextarea,\nselect {\n  font: inherit;\n}\n\np,\nh1,\nh2,\nh3,\nh4,\nh5,\nh6 {\n  overflow-wrap: break-word;\n}\n\np {\n  text-wrap: pretty;\n}\nh1,\nh2,\nh3,\nh4,\nh5,\nh6 {\n  text-wrap: balance;\n}\n\n#root,\n#__next {\n  isolation: isolate;\n}\n\nhtml,\nbody {\n  height: 100dvb;\n  display: grid;\n  grid-template-rows: 60px 1fr 100px;\n  justify-content: center;\n}\n\nbody {\n  padding: 0.5rem;\n}\n\ndialog#end-screen {\n  border: none;\n  background-color: #aeaeaea7;\n  position: absolute;\n  left: 50%;\n  top: 50%;\n  transform: translate(-50%, -50%);\n  width: 80rem;\n  height: 30rem;\n  z-index: 1;\n}\n\ndialog#end-screen form button {\n  width: 10rem;\n  height: 5rem;\n  font-family: Verdana, Geneva, Tahoma, sans-serif;\n  font-size: 1.2rem;\n  cursor: pointer;\n  position: absolute;\n  left: 50%;\n  top: 50%;\n  transform: translate(-50%, -50%);\n}\n\nheader {\n  display: flex;\n  align-items: center;\n  gap: 5rem;\n}\n\nheader output {\n  background: #ededed;\n  width: 30%;\n  padding: 1px 10px;\n  font-size: 1.1rem;\n}\nmain#battlefields {\n  width: 80rem;\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n  grid-template-rows: 1fr min-content;\n  justify-items: center;\n  align-items: center;\n  padding-bottom: 1rem;\n}\n\n.battlefield {\n  position: relative;\n  width: calc(25rem + 10px);\n  height: 20rem;\n  display: grid;\n  grid-template-rows: min-content 1fr;\n  grid-template-columns: min-content 1fr;\n  grid-template-areas:\n    ". row-index"\n    "column-index table-battlefield";\n  column-gap: 10px;\n}\n\n.battlefield-placeholder {\n  position: absolute;\n  height: 100%;\n  width: 100%;\n  background-color: rgba(240, 248, 255, 0.639);\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n\n.battlefield-placeholder button {\n  font-size: 1.1rem;\n  width: 5rem;\n  height: 2rem;\n  background-color: rgb(77, 77, 77);\n  color: #fff;\n  &:hover {\n    cursor: pointer;\n    background-color: #ededed;\n    color: #000;\n  }\n}\n.table-row-index {\n  grid-area: row-index;\n  display: flex;\n  justify-content: space-between;\n}\n\n.table-column-index {\n  grid-area: column-index;\n  display: flex;\n  flex-direction: column;\n  justify-content: space-around;\n}\n\n.table-row-index div,\n.table-column-index div {\n  height: var(--cell-height, 1em);\n  width: var(--cell-width, 1em);\n  text-align: center;\n}\n\ntable.battlefield-table {\n  grid-area: table-battlefield;\n  text-align: center;\n}\ntable,\ntd {\n  border: 1px solid black;\n  border-collapse: collapse;\n}\n\ntd {\n  padding: 0px;\n  height: var(--cell-height);\n  width: var(--cell-width);\n}\n\n.table-cell,\n.ship {\n  width: 100%;\n  height: 100%;\n  .table-cell&:hover {\n    background-color: var(--MISS-color, (248, 246, 126));\n    cursor: pointer;\n  }\n}\n\n.ship {\n  background-color: var(--SHIP-color, black);\n}\n\n.cell-miss {\n  background-color: var(--MISS-color);\n}\n\n.cell-hit {\n  background-color: var(--HIT-color);\n}\nfooter {\n  background-color: rgb(36, 36, 36);\n  color: #fff;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 1.1rem;\n}\n',""]);const o=s},314:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n="",r=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),r&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),r&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n})).join("")},t.i=function(e,n,r,a,i){"string"==typeof e&&(e=[[null,e,void 0]]);var s={};if(r)for(var o=0;o<this.length;o++){var l=this[o][0];null!=l&&(s[l]=!0)}for(var c=0;c<e.length;c++){var d=[].concat(e[c]);r&&s[d[0]]||(void 0!==i&&(void 0===d[5]||(d[1]="@layer".concat(d[5].length>0?" ".concat(d[5]):""," {").concat(d[1],"}")),d[5]=i),n&&(d[2]?(d[1]="@media ".concat(d[2]," {").concat(d[1],"}"),d[2]=n):d[2]=n),a&&(d[4]?(d[1]="@supports (".concat(d[4],") {").concat(d[1],"}"),d[4]=a):d[4]="".concat(a)),t.push(d))}},t}},601:e=>{e.exports=function(e){return e[1]}},72:e=>{var t=[];function n(e){for(var n=-1,r=0;r<t.length;r++)if(t[r].identifier===e){n=r;break}return n}function r(e,r){for(var i={},s=[],o=0;o<e.length;o++){var l=e[o],c=r.base?l[0]+r.base:l[0],d=i[c]||0,h="".concat(c," ").concat(d);i[c]=d+1;var p=n(h),u={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==p)t[p].references++,t[p].updater(u);else{var m=a(u,r);r.byIndex=o,t.splice(o,0,{identifier:h,updater:m,references:1})}s.push(h)}return s}function a(e,t){var n=t.domAPI(t);return n.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;n.update(e=t)}else n.remove()}}e.exports=function(e,a){var i=r(e=e||[],a=a||{});return function(e){e=e||[];for(var s=0;s<i.length;s++){var o=n(i[s]);t[o].references--}for(var l=r(e,a),c=0;c<i.length;c++){var d=n(i[c]);0===t[d].references&&(t[d].updater(),t.splice(d,1))}i=l}}},659:e=>{var t={};e.exports=function(e,n){var r=function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}(e);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(n)}},540:e=>{e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},56:(e,t,n)=>{e.exports=function(e){var t=n.nc;t&&e.setAttribute("nonce",t)}},825:e=>{e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(n){!function(e,t,n){var r="";n.supports&&(r+="@supports (".concat(n.supports,") {")),n.media&&(r+="@media ".concat(n.media," {"));var a=void 0!==n.layer;a&&(r+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),r+=n.css,a&&(r+="}"),n.media&&(r+="}"),n.supports&&(r+="}");var i=n.sourceMap;i&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),t.styleTagTransform(r,e,t.options)}(t,e,n)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},113:e=>{e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}}},t={};function n(r){var a=t[r];if(void 0!==a)return a.exports;var i=t[r]={id:r,exports:{}};return e[r](i,i.exports,n),i.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.nc=void 0;var r=n(72),a=n.n(r),i=n(825),s=n.n(i),o=n(659),l=n.n(o),c=n(56),d=n.n(c),h=n(540),p=n.n(h),u=n(113),m=n.n(u),f=n(208),g={};g.styleTagTransform=m(),g.setAttributes=d(),g.insert=l().bind(null,"head"),g.domAPI=s(),g.insertStyleElement=p(),a()(f.A,g),f.A&&f.A.locals&&f.A.locals;const y=class{constructor(e,t){this.name=e,this.length=t,this.hitsCount=0,this.sunk=!1,this.positions=[]}setPositions(e){this.positions=e}fixShip(){this.hitsCount=0,this.sunk=!1}isSunk(){return this.sunk}hit(){if(this.sunk)throw new Error(`The ${this.name} is already sunk! It cannot be damaged anymore`);this.hitsCount++,this.length-this.hitsCount<=0&&(this.sunk=!0)}},b=class{constructor(){this.ownGrid=this.#e(),this.trackingGrid=this.#e(),this.shipsSunk=0,this.shipsPlaced=new Set}resetBoard(){this.trackingGrid=this.#e(),this.ownGrid=this.#e(),this.shipsSunk=0,this.shipsPlaced.clear()}randomiseOwnShips(e){this.ownGrid=this.#e(),this.shipsPlaced.clear(),e.forEach((e=>{this.placeShipRandomly(e)}))}#e(){const e=[];for(let t=0;t<10;t++){const t=[];for(let e=0;e<10;e++)t.push(null);e.push(t)}return e}getOwnGrid(){return this.ownGrid}getTrackingGrid(){return this.trackingGrid}isGameover(){return 5===this.shipsSunk}placeShipRandomly(e){const t=Math.floor(2*Math.random());let n=0,r=0;for(;;){n=Math.floor(10*Math.random()),r=Math.floor(10*Math.random());const a=0===t?n+e.length-1:n,i=1===t?r+e.length-1:r;if(a>=10||i>=10)continue;let s=!1;for(let a=0;a<e.length;a++){const e=`${0===t?n+a:n}-${1===t?r+a:r}`;if(this.shipsPlaced.has(e)){s=!0;break}}if(!s)return void this.placeShip([n,r],e,t)}throw new Error("Max. attemps reached to place the ships 1000")}placeShip(e,t,n){const r=this.getOwnGrid().map((e=>[...e]));let[a,i]=e;const s=0===n?a+t.length-1:a,o=1===n?i+t.length-1:i;if(a<0||i<0||s>=10||o>=10)throw new Error(`Invalid coordinate (${a}, ${i}). The ship goes out of bounds.`);const l=[];for(let e=0;e<t.length;e++){const e=r[a][i];if(e instanceof y&&e!==t)throw new Error("Cannot place a ship on top of another!");r[a][i]=t,l.push([a,i]),this.shipsPlaced.add(`${a}-${i}`),0===n?a++:i++}t.setPositions(l),this.ownGrid=r}receiveAttack(e,t){const n=this.ownGrid[e][t];if(n instanceof y){if(n.isSunk())throw new Error("This ship is already sunk");n.hit(),n.isSunk()&&this.shipsSunk++,this.trackingGrid[e][t]=1}else this.trackingGrid[e][t]=0;return this.trackingGrid[e][t]}},v=class{constructor(e){this.name=e,this.gameboard=new b,this.ships=this.createShips(),this.placeShipsRandomly()}createShips(){const e=[],t=[{name:"Destroyer",length:2},{name:"Submarien",length:2},{name:"Cruiser",length:3},{name:"Battleship",length:4},{name:"Carrier",length:5}];for(const n of t){const t=new y(n.name,n.length);e.push(t)}return e}placeShipsRandomly(){this.gameboard.randomiseOwnShips(this.ships)}fixShips(){this.ships.forEach((e=>{e.fixShip()}))}getShips(){return this.ships}getBoards(){return[this.gameboard.getOwnGrid(),this.gameboard.getTrackingGrid()]}placeShip(e,t,n){this.gameboard.ownGrid.placeShip(e,t,n)}receiveAttack(e,t){return this.gameboard.receiveAttack(e,t)}resetBoard(){this.gameboard.resetBoard(),this.fixShips()}},w=class extends v{constructor(){super("Computer"),this.playedCells=new Set}resetBoard(){super.resetBoard(),this.playedCells.clear()}#t(e,t){return`${e}-${t}`}generateAttackingCoords(){for(;;){const e=Math.floor(10*Math.random()),t=Math.floor(10*Math.random()),n=this.#t(e,t);if(!this.playedCells.has(n))return this.playedCells.add(n),[e,t]}}attackShipOn(){return this.generateAttackingCoords()}},k=document.querySelectorAll(".battlefield-table"),x=document.querySelectorAll(".battlefield-placeholder");let S=1;const C=(e,t)=>{const n=0===t(e.currentTarget.dataset.x,e.currentTarget.dataset.y)?"cell-miss":"cell-hit";e.currentTarget.classList.add(n),e.currentTarget.style.pointerEvents="none"},E=()=>{x[S].style.display="none",S=1===S?0:1,x[S].style.display="flex"},G=document.getElementsByTagName("output")[0],T=new class{constructor(e="Player 1",t="Computer"){this.player1=new v(e),this.player2=new w(t),this.attacker=this.player1,this.defensor=this.player2}endGame(){var e;G.value=this.attacker.name+" wins!",this.player1.resetBoard(),this.player2.resetBoard(),this.attacker=this.player1,this.defensor=this.player2,e=this.placeShipsRandomly.bind(this),document.getElementById("end-screen").showModal(),document.querySelector("#end-screen form button").addEventListener("click",(()=>(e=>{S=1,k[0].replaceChildren(),k[1].replaceChildren(),x[S].style.display="flex",document.getElementById("play-btn").style.display="block",document.getElementById("randomise").disabled=!1,e()})(e)),{once:!0})}changeTurn(){this.attacker=this.attacker===this.player1?this.player2:this.player1,this.defensor=this.defensor===this.player1?this.player2:this.player1,this.attacker instanceof w&&this.computerTurn(),E()}computerTurn(){setTimeout((()=>{if(this.defensor instanceof w)return;const[e,t]=this.attacker.attackShipOn(),n=this.defensor.receiveAttack(e,t);((e,t,n)=>{const r=0===n?"cell-miss":"cell-hit";document.querySelector(`.battlefield-own .battlefield-table tr div[data-x = "${e}"][data-y="${t}"]`).classList.add(r)})(e,t,n),this.defensor.gameboard.isGameover()?this.endGame():0===n?this.changeTurn():this.computerTurn()}),600)}placeShip(e,t,n){this.attacker.placeShip(e,t,n)}placeShipsRandomly(){this.player1.placeShipsRandomly(),this.initOwnBoard()}initOwnBoard(){(e=>{const t=k[0];t.replaceChildren(),x[0].style.display="none",e.forEach(((e,n)=>{const r=document.createElement("tr");for(let t=0;t<e.length;t++){const a=document.createElement("td"),i=document.createElement("div");i.dataset.x=n,i.dataset.y=t;let s="table-cell";e[t]instanceof y&&(s="ship"),i.classList.add(s),a.appendChild(i),r.appendChild(a)}t.style.pointerEvents="none",t.appendChild(r)}))})(this.player1.gameboard.getOwnGrid())}attackCell(e,t){try{const n=this.defensor.receiveAttack(e,t);return 0===n?(G.textContent=`${this.attacker.name} has missed!`,this.changeTurn()):1===n&&(G.textContent=`${this.attacker.name} has hit a ship!`),this.defensor.gameboard.isGameover()&&this.endGame(),n}catch(e){return G.textContent=e.message,null}}startRound(){G.value="It's "+this.attacker.name+" turn.",this.defensor instanceof w&&this.defensor.placeShipsRandomly(),((e,t)=>{const n=k[1];e.forEach(((e,r)=>{const a=document.createElement("tr");for(let n=0;n<e.length;n++){const e=document.createElement("td"),i=document.createElement("div");i.dataset.x=r,i.dataset.y=n,i.addEventListener("click",(e=>C(e,t)));let s="table-cell";i.classList.add(s),e.appendChild(i),a.appendChild(e)}n.appendChild(a)})),E(),document.getElementById("play-btn").style.display="none",document.getElementById("randomise").disabled=!0})(this.defensor.gameboard.getOwnGrid(),this.attackCell.bind(this))}getPlayers(){return[this.player1,this.player2]}};T.initOwnBoard();const I=document.getElementById("play-btn"),M=document.getElementById("randomise");I.addEventListener("click",(()=>T.startRound())),M.addEventListener("click",(()=>T.placeShipsRandomly()))})();